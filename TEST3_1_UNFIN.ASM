DATA SEGMENT
STRING DB 'INPUTSTRING,THE END FLAG IS ',0DH,0AH,'$'
CRLF DB 0DH,0AH,'$'
DATA ENDS

STACK SEGMENT STACK
DB 100 DUP(?)
STACK ENDS

CODE SEGMENT
     ASSUME DS:DATA,CS:CODE,SS:STACK
START:MOV AX,DATA
      MOV DS,AX
	  MOV BX,0
	  
NEXT: MOV DX,OFFSET STRING;显示提示信息
	  MOV AH,9
	  INT 21H
	  
	  MOV AH,1;接受键入字符
	  INT 21H
	  CMP AL,24H;'$'
	  JE  NEXT1
;	  CMP AL,0DH;CR
;	  JE  ABD
	  CMP AL,30H;小于0
	  JB  NEXT
	  CMP AL,39H;大于9
	  JA  NEXT
	  INC BX
	  
	  CALL DISP
	  MOV DX,BX;显示计数结果
	  MOV AH,2;只能显示一个字符
	  INT 21H
	  JMP NEXT
	  
DISP PROC;子程序显示输入字符
     MOV DL,AL
	 MOV AH,2
     INT 21H
	 RET
DISP ENDP

CRLF0 PROC;子程序回车换行
      MOV DX,OFFSET CRLF
	  MOV AX,9
	  INT 21H
      RET
CRLF0 ENDP

;ABD:  CALL CRLF0
;	  JMP NEXT
	  
NEXT1:CALL DISP;调用DISP
	  CALL CRLF0
      MOV DX,BX;显示计数结果
	  MOV AH,2;只能显示一个字符
	  INT 21H
	  MOV AH,4CH;返回DOS
	  INT 21H
CODE  ENDS
      END START
